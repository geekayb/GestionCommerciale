<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition template="/template.xhtml">


        <ui:define name="title">
            <h:outputText value="#{bundle.ListFactureTitle}"></h:outputText>
        </ui:define>

        <ui:define name="body" >
            <div class="ui-grid ui-grid-responsive" style="background-image: url('/Gestion_commerciale/im.png');height: 250%">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-12" >




                        <h:form id="form" style="margin: auto">




                            <p:panel style="text-align:center;width:24%;display: inline-block">

                                <h:commandLink action="#{factureController.redirectListe()}"> <div class="ui-g" style="display: inline-block;width: 100%;height: 100%;background-image: url('11.png');  background-repeat:no-repeat" >

                                        <h:outputText value="#{factureController.nbrFactureCrees()}" style="font-size: 40px; color: white;margin-top: 10%;margin-left:60%"/><br></br><br></br><br></br>
                                    </div>
                                </h:commandLink>

                            </p:panel>
                            <p:panel style="text-align:center;width:24%;display: inline-block">

                                <h:commandLink action="#{factureController.redirectListe()}"> <div class="ui-g" style="display: inline-block;width: 100%;background-image: url('22.PNG');  background-repeat:no-repeat" >

                                        <h:outputText value="#{factureController.nbrFactureNonPayee()}" style="font-size: 40px; color: white;margin-top: 8%;margin-left:50%"/><br></br><br></br><br></br>
                                    </div>
                                </h:commandLink>

                            </p:panel>

                            <p:panel style="text-align:center;width:24%;display: inline-block">

                                <h:commandLink action="#{factureController.redirectListeRetard()}"> <div class="ui-g" style="display: inline-block;width: 100%;background-image: url('33.png');  background-repeat:no-repeat" >

                                        <h:outputText value="#{factureController.nbrFactureEnRetard()}" style="font-size: 40px; color: white;margin-top:8%;margin-left:50%"/><br></br><br></br><br></br>
                                    </div>
                                </h:commandLink>

                            </p:panel>
                            <p:panel style="text-align:center;width:24%;display: inline-block">

                                <h:commandLink action="#{factureController.redirectListe()}"> <div class="ui-g" style="display: inline-block;width: 100%;background-image: url('44.png');  background-repeat:no-repeat" >

                                        <h:outputText value="#{factureController.nbrFacturePayee()}" style="font-size: 40px; color: white;margin-top: 8%;margin-left:50%"/><br></br><br></br><br></br>
                                    </div>
                                </h:commandLink>

                            </p:panel>
                            <p:panel style="text-align:center;width:24%;display: inline-block; ">

                                <h:commandLink action="#{produitController.redirectListe()}"> <div class="ui-g" style="display: inline-block;width: 100%;background-image: url('55.png');  background-repeat:no-repeat" >

                                        <h:outputText value="#{factureController.nbrProduit()}" style="font-size: 40px; color: white;margin-top: 8%;margin-left:50%"/><br></br><br></br><br></br>
                                    </div>
                                </h:commandLink>

                            </p:panel>
                            <p:panel style="text-align:center;width:24%;display: inline-block">

                                <h:commandLink action="#{clientController.redirectListe()}"> <div class="ui-g" style="display: inline-block;width: 100%;background-image: url('66.png');  background-repeat:no-repeat" >

                                        <h:outputText value="#{factureController.nbrClient()}" style="font-size: 40px; color: white;margin-top: 8%;margin-left:50%"/><br></br><br></br><br></br>
                                    </div>
                                </h:commandLink>

                            </p:panel>
                            <p:panel style="text-align:center;width:24%;display: inline-block">

                                <h:commandLink action="#{fournisseurController.redirectListe()}"> <div class="ui-g" style="display: inline-block;width: 100%;background-image: url('77.png');  background-repeat:no-repeat" >

                                        <h:outputText value="#{factureController.nbrFournisseur()}" style="font-size: 40px; color: white;margin-top: 8%;margin-left:50%"/><br></br><br></br><br></br>
                                    </div>
                                </h:commandLink>

                            </p:panel>
                            <p:panel style="text-align:center;width:24%;display: inline-block">

                                <h:commandLink action="#{utilisateurController.redirectListe()}"> <div class="ui-g" style="display: inline-block;width: 100%;background-image: url('88.png');  background-repeat:no-repeat" >

                                        <h:outputText value="#{factureController.nbrUsers()}" style="font-size: 40px; color: white;margin-top: 8%;margin-left:50%"/><br></br><br></br><br></br>
                                    </div>
                                </h:commandLink>

                            </p:panel>


                        </h:form>


                            <p:panelGrid columns="2" style="margin-left: 7%; margin-top: 2%; height: 100% !important; width: 20%; display: inline-block; " >


                            <f:facet name="header" >
                                <h:outputText value="Etat des factures" style=";padding:10px; margin: auto; "/><br></br><br></br>
                            </f:facet>

                            <p:row>
                                <p:chart type="bar" model="#{chartView.barModel}" style="width:320px;height:250px"></p:chart>                            </p:row>
                        </p:panelGrid>
<!--                        <p:panelGrid columns="2" style="margin-left: 10%; margin-top: 1%; height: 100% !important; width: 20%; display: inline-block; " >


                            <f:facet name="header" >
                                <h:outputText value="Montant des factures" style=";padding:10px; margin: auto; "/><br></br><br></br>
                            </f:facet>

                            <p:row>
                                <p:chart type="pie" model="#/{chartView.pieModel1}" style="width:320px;height:250px"></p:chart>                            </p:row>
                        </p:panelGrid> -->
                       <p:panelGrid columns="2" style="margin-left: 10%; margin-top: 1%; height: 100% !important; width: 20%; display: inline-block; " >


                            <f:facet name="header" >
                                <h:outputText value="Montant des factures" style=";padding:10px; margin: auto; "/><br></br><br></br>
                            </f:facet>

                            <p:row>
                                <p:chart type="bar" model="#{chartView.barModel3}" style="width:320px;height:250px"></p:chart>                            </p:row>
                        </p:panelGrid> 

                        <p:panelGrid columns="2" style="margin-left: 10%; margin-top: 2%; height: 100% !important; width: 20%; display: inline-block; " >


                            <f:facet name="header" >
                                <h:outputText value="Nombre de factures, devis..." style=";padding:10px; margin: auto; "/><br></br><br></br>
                            </f:facet>

                            <p:row>
                                <p:chart type="bar" model="#{chartView.barModel2}" style="width:320px;height:250px"></p:chart>                            </p:row>
                        </p:panelGrid>
                        <br></br>

                        <br></br>










<!--
                        <p:panelGrid columns="2" style="margin-left: 10%; margin-top: 2%; height: 100% !important; width: 20%; display: inline-block; " >


                            <f:facet name="header" >
                                <h:outputText value="Le montant total non payé" style="font-size: 20px;padding:10px; margin: auto; color: brown; "/><br></br><br></br>
                            </f:facet>

                            <p:row>
                                <b>  <h:outputText value="#1{factureController.getMontantTotalNonPaye()} Dhs" style=" color: red;font-size: 30px;padding: 10px;height: 20% !important"/></b><br></br><br></br>
                            </p:row>
                        </p:panelGrid>
                        <p:panelGrid columns="2" style="margin-left: 8%; margin-top: 2%; height: 100% !important; width: 20%; display: inline-block">

                            <f:facet name="header">
                                <h:outputText value="Le montant total en retard" style="color:#55627f;font-size: 20px;padding:10px; margin: auto"/><br></br><br></br>
                            </f:facet>

                            <p:row>
                                <b> <h:outputText value="#1{factureController.getMontantTotalEnRetard()} Dhs" style="font-size: 30px;color: blue;text-align: left;padding: 10px;height: 20% !important"/></b><br></br><br></br>
                            </p:row>
                        </p:panelGrid>
                        <p:panelGrid columns="2" style="margin-left: 8%; margin-top: 2%; height: 100% !important; width: 20%; display: inline-block">

                            <f:facet name="header">
                                <h:outputText value="Le montant  total  payé" style="font-size: 20px;padding:15px; margin: auto"/><br></br><br></br>
                            </f:facet>

                            <p:row>
                                <b> <h:outputText value="#1{factureController.getMontantTotalPaye()} Dhs" style="font-size: 30px; color: green; padding: 10px;height: 20% !important; "/></b><br></br><br></br>
                            </p:row>
                        </p:panelGrid>
                    </div>
                    
-->            </div>
                    
                    <!--
                    <p:panelGrid columns="2" style="margin-left: 7%; margin-top: 0%; height: 100% !important; width: 24%; display: inline-block; " >


                        <f:facet name="header" >
                            <h:outputText value="Montant total payé" style=";padding:10px; margin: auto; "/><br></br><br></br>
                        </f:facet>

                        <p:row>
                            <p:chart type="metergauge" model="#/{chartView.meterGaugeModel1}" style="width:320px;height:250px" />
                        </p:row>
                    </p:panelGrid>
                    <p:panelGrid columns="2" style="margin-left: 6%; margin-top: 1%; height: 100% !important; width: 24%; display: inline-block; " >


                        <f:facet name="header" >
                            <h:outputText value="Montant total non payé" style=";padding:10px; margin: auto; "/><br></br><br></br>
                        </f:facet>

                        <p:row>
                            <p:chart type="metergauge" model="#/{chartView.meterGaugeModel2}" style="width:320px;height:250px" />
                        </p:row>
                    </p:panelGrid>
                    <p:panelGrid columns="2" style="margin-left: 6%; margin-top: 1%; height: 100% !important; width: 24%; display: inline-block; " >


                        <f:facet name="header" >
                            <h:outputText value="Montant total  en retard" style=";padding:10px; margin: auto; "/><br></br><br></br>
                        </f:facet>

                        <p:row>
                            <p:chart type="metergauge" model="#/{chartView.meterGaugeModel3}" style="width:320px;height:250px" />
                        </p:row>
                    </p:panelGrid>
                    -->
                    
                                          <p:panel header="Montant Total payé(DH)" style="margin-left: 15%; width: 20%; text-align: center;  font-weight: bold;font-size: 20px; margin-top: 3%;display: inline-block">
                                              <h2 style="color: brown"> #{factureController.getMontantTotalPayeDh()} Dhs</h2>
                                         <br></br>
                                    </p:panel>
                                          <p:panel header="Montant total non payé(DH)" style="margin-left: 5%;width: 20%; text-align: center;  font-weight: bold;font-size: 20px; margin-top: 3%;display: inline-block">
                                              <h2 style="color: red">#{factureController.getMontantTotalNonPayeDh()} Dhs</h2>
                                         <br></br>
                                    </p:panel>
                                          <p:panel header="Montant total  en retard(DH)" style="margin-left: 5%;width: 20%; text-align: center;  font-weight: bold;font-size: 20px; margin-top: 3%;display: inline-block">
                                              <h2 style="color: green"> #{factureController.getMontantTotalEnRetardDh()} Dhs</h2>
                                        <br></br>
                                    </p:panel>
                                          <p:panel header="Montant Total payé(€)" style="margin-left: 15%; width: 20%; text-align: center;  font-weight: bold;font-size: 20px; margin-top: 3%;display: inline-block">
                                              <h2 style="color: brown"> #{factureController.getMontantTotalPayeEuro()} €</h2>
                                         <br></br>
                                    </p:panel>
                                          <p:panel header="Montant total non payé(€)" style="margin-left: 5%;width: 20%; text-align: center;  font-weight: bold;font-size: 20px; margin-top: 3%;display: inline-block">
                                              <h2 style="color: red">#{factureController.getMontantTotalNonPayeEuro()} €</h2>
                                         <br></br>
                                    </p:panel>
                                          <p:panel header="Montant total  en retard(€)" style="margin-left: 5%;width: 20%; text-align: center;  font-weight: bold;font-size: 20px; margin-top: 3%;display: inline-block">
                                              <h2 style="color: green"> #{factureController.getMontantTotalEnRetardEuro()} €</h2>
                                        <br></br>
                                    </p:panel>
                                          <p:panel header="Montant Total payé($)" style="margin-left: 15%; width: 20%; text-align: center;  font-weight: bold;font-size: 20px; margin-top: 3%;display: inline-block">
                                              <h2 style="color: brown"> #{factureController.getMontantTotalPayeDollar()} $</h2>
                                         <br></br>
                                    </p:panel>
                                          <p:panel header="Montant total non payé($)" style="margin-left: 5%;width: 20%; text-align: center;  font-weight: bold;font-size: 20px; margin-top: 3%;display: inline-block">
                                              <h2 style="color: red">#{factureController.getMontantTotalNonPayeDollar()} $</h2>
                                         <br></br>
                                    </p:panel>
                                          <p:panel header="Montant total  en retard($)" style="margin-left: 5%;width: 20%; text-align: center;  font-weight: bold;font-size: 20px; margin-top: 3%;display: inline-block">
                                              <h2 style="color: green"> #{factureController.getMontantTotalEnRetardDollar()} $</h2>
                                        <br></br>
                                    </p:panel>





                    <div class="ui-grid-row">
                        <div class="ui-grid-col-12">
                            <h:form id="FactureListForm" style="margin-top: 2%">
                                <p:fieldset id="availableClientsField" legend="Factures récentes" toggleable="true" style="margin-left: 5% ;width: 90%" >
                                    <p:dataTable id="datalist" value="#{factureController.allFacures}" var="item"
                                                 selection="#{factureController.selected}"
                                                 rowKey="#{item.id}"
                                                 >

                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="#{bundle.ListFactureTitle_etat}"/>
                                            </f:facet>
                                            <div style="background-color:#{factureController.getColor(item.etat)};width: max-content;padding: 4px;border-radius: 3px"><h:outputText id="etat" value="#{item.etat}" style="color: white; font-weight: bold !important"/></div>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Facture N°"/>
                                            </f:facet>
                                            <h:outputText value="#0#{item.dateFacture.month+1}#{item.dateFacture.year+1900}/#{item.id}" style="color: #1eb3c0;font-weight: normal !important"/>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Date d'émission"/>
                                            </f:facet>
                                            <h:outputText value="#{factureController.formatDateFacture(item.dateFacture)}"/>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Date d'échénace"/>
                                            </f:facet>
                                            <h:outputText value="#{factureController.formatDateFacture(item.dateEcheance)}"/>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Nom du client"/>
                                            </f:facet>
                                            <h:outputText value="#{item.client.raisonSociale}" style="color: #1eb3c0;font-weight: normal !important"/>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Montant payé"/>
                                            </f:facet>
                                            <h:outputText value="#{item.montantPaye} #{item.devise}" style="color: #76c232;font-weight: bold !important"/>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Montant Dû"/>
                                            </f:facet>
                                            <h:outputText value="#{item.montantDu} #{item.devise}" style="color: #FF9933;font-weight: bold !important"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:fieldset>
                            </h:form>
                        </div>
                    </div>

                </div>
            </div>









        </ui:define>


    </ui:composition>


































</html>

