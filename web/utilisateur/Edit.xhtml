<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/template.xhtml">
        <h:outputStylesheet library="default" name="css/myStyle.css" />

        <ui:define name="body">

            <div class="ui-grid ui-grid-responsive" style="background-image: url('/Gestion_commerciale/im.png');height: 100%">
                <div class="ui-grid ui-grid-responsive" style="background-color: white;width: 90%; margin: auto; border: 2px solid gray; border-radius: 10px">

                    <div class="ui-grid-row">
                        <div class="ui-grid-col-12">
                            <h:form id="UtilisateurEditForm">
                                <p:fieldset id="edit1" legend="Coordonnées" style="width: 70%; margin: auto">

                                    <h:panelGroup id="display1" >
                                        <p:panelGrid columns="4" rendered="#{utilisateurController.selected != null}" style="width: 100%">

                                            <p:outputLabel value="#{bundle.EditUtilisateurLabel_nom}" for="nom" />
                                            <p:inputText id="nom" value="#{utilisateurController.selected.nom}" title="#{bundle.EditUtilisateurTitle_nom}" />
                                            <p:outputLabel value="#{bundle.EditUtilisateurLabel_prenom}" for="prenom" />
                                            <p:inputText id="prenom" value="#{utilisateurController.selected.prenom}" title="#{bundle.EditUtilisateurTitle_prenom}" />
                                            <p:outputLabel value="Fonction" for="fonction" />
                                            <p:inputText id="fonction" value="#{utilisateurController.selected.fonction}" title="#{bundle.EditUtilisateurTitle_fonction}" />
                                            <p:outputLabel value="Profil" for="profil" />
                                            <p:inputText disabled="true" id="profil" value="#{utilisateurController.selected.profil}" title="#{bundle.EditUtilisateurTitle_profil}" />
                                            <p:outputLabel value="#{bundle.EditUtilisateurLabel_email}" for="email" />
                                            <p:inputText disabled="true" id="email" value="#{utilisateurController.selected.email}" title="#{bundle.EditUtilisateurTitle_email}" />

                                            <p:outputLabel value="#{bundle.EditUtilisateurLabel_password}" for="password" />
                                            <p:inputText type="password" disabled="true" id="password" value="#{utilisateurController.selected.password}" title="#{bundle.EditUtilisateurTitle_password}" />                       
                                            <p:outputLabel value="#{bundle.EditUtilisateurLabel_telephone}" for="telephone" />
                                            <p:inputText id="telephone" value="#{utilisateurController.selected.telephone}" title="#{bundle.EditUtilisateurTitle_telephone}" />
                                        </p:panelGrid>

                                    </h:panelGroup>

                                </p:fieldset>

                                <p:spacer></p:spacer>
                                <p:spacer></p:spacer>
                                <p:spacer></p:spacer>



                                <p:fieldset id="edit2" legend="Modification des identifiants de connexion" style="width: 70%; margin: auto">

                                    <h:panelGroup id="display2" >
                                        <p:panelGrid columns="2" rendered="#{utilisateurController.selected != null}" style="width: 100%">
                                            <p:outputLabel value="Email actuel" for="email2" />
                                            <p:inputText style="width: 60%" disabled="true" id="email2" value="#{utilisateurController.selected.email}" title="#{bundle.EditUtilisateurTitle_email}" />
                                            <p:outputLabel value="Nouvel Email" for="nouvelEmail" />
                                            <p:inputText style="width: 60%" id="nouvelEmail" value="#{utilisateurController.nouvelEmail}" title="#{bundle.EditUtilisateurTitle_prenom}" />
                                            <p:outputLabel value="Ancien mot de passe" for="ancien" />
                                            <p:inputText type="password" style="width: 60%" id="ancien" value="#{utilisateurController.ancienPassword}" title="#{bundle.EditUtilisateurTitle_fonction}" />

                                            <p:outputLabel value="Nouveau mot de passe" for="newPassword" />
                                            <p:inputText  type="password" style="width: 60%" id="newPassword" value="#{utilisateurController.newPassword}" title="#{bundle.EditUtilisateurTitle_profil}" />



                                            <p:outputLabel value="Confirmez le mot de passe" for="confirmePassword" />
                                            <p:inputText  type="password" style="width: 60%" id="confirmePassword" value="#{utilisateurController.confirmePassword}" title="#{bundle.EditUtilisateurTitle_email}" />

                                        </p:panelGrid>

                                    </h:panelGroup>

                                </p:fieldset>
                                 <p:spacer></p:spacer>
                                <p:spacer></p:spacer>
                                <p:spacer></p:spacer>
                                <p:fieldset  id ="fiels" legend="Autorisation" style="width: 70%; margin: auto" rendered="#{utilisateurController.isUser}">
                                    <h:panelGroup id="display3" style="height: 100%; width: 100%">
                                        <p:panelGrid columns="2"  style="width: 100%;">
                                            <p:outputLabel styleClass="outputLabel" value="Gérer les clients"  />
                                            <p:selectBooleanCheckbox value="#{utilisateurController.selected.gererClients}" />

                                            <p:outputLabel styleClass="outputLabel" value="Gérer le catalogue" />
                                            <p:selectBooleanCheckbox value="#{utilisateurController.selected.gererCatalogue}" /> 

                                            <p:outputLabel styleClass="outputLabel" value="Gérer les fournisseurs"  />
                                            <p:selectBooleanCheckbox value="#{utilisateurController.selected.gererFournisseur}" />

                                            <p:outputLabel styleClass="outputLabel" value="Gérer les données(Factures, Devis...)" />
                                            <p:selectBooleanCheckbox value="#{utilisateurController.selected.gererDonnees}" /> 

                                            <p:outputLabel styleClass="outputLabel" value="Gérer les utilisateurs"  />
                                            <p:selectBooleanCheckbox value="#{utilisateurController.selected.gererUsers}" /> 

                                            <p:outputLabel styleClass="outputLabel" value="Impression des documents"  />
                                            <p:selectBooleanCheckbox value="#{utilisateurController.selected.impression}" /> 

                                            <p:outputLabel styleClass="outputLabel" value="Gérer les paramètres"  />
                                            <p:selectBooleanCheckbox value="#{utilisateurController.selected.gererParametre}" /> 

                                            <p:outputLabel styleClass="outputLabel" value="Payer les factures"  />
                                            <p:selectBooleanCheckbox value="#{utilisateurController.selected.payerFacture}" /> 
                                        </p:panelGrid>
                                    </h:panelGroup>
                                </p:fieldset>
                                <p:commandButton style="margin-left: 15%;margin-bottom: 5%" actionListener="#{utilisateurController.update}" update=":growl" value="#{bundle.Save}"/>

                            </h:form>
                        </div>
                    </div>
                </div>
            </div>
        </ui:define>
    </ui:composition>
</html>
